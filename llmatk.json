{
    "project": "markia",
    "dataset": [
        {
            "id": "doc",
            "reader": {
                "provider": "TXTFileReader",
                "__base_dir": "E:/Nicolas/Workspace/Documentation",
                "base_dir": "../Documentation",

                "_base_dir": "${DATA_BASE_PATH}/documentations",
                "glob": "**/*.md"
            },
            "transformations": [
                {
                    "provider": "SentenceSplitter",
                    "chunk_size": 1000,
                    "chunk_overlap": 20
                }
            ]
        }
    ],
    "scraping_cache": {
        "provider": "FSCache",
        "base_dir": "${DATA_BASE_PATH}/scraping_cache"
    },
    "embedding_model": {
        "provider": "OpenAI",
        "model": "text-embedding-3-small",
        "openai_api_key": "${OPENAI_API_KEY}"
    },
    "vectorstore": {
        "provider": "CustomMongoDB",
        "url": "${MONGO_CONNECTION_STRING}",
        "db_name": "${MONGO_DB_NAME}",
        "collection_name": "${MONGO_COLLECTION_NAME}",
        "vector_index_name": "vector_index"
    },
    "documentstore": {
        "provider": "MongoDB",
        "url": "${MONGO_CONNECTION_STRING}",
        "db_name": "${MONGO_DB_NAME}"
    },
    "llm": {
        "provider": "OpenAI",
        "model": "gpt-4o"
    },
    "chat_engine": {
        "provider": "ContextChatEngine",
        "chat_mode":"context",
        "retriever": {
            "provider": "VectorIndexRetriever",
            "similarity_top_k": 5
        },
        "memory": {
            "provider": "ChatMemoryBuffer",
            "token_limit": 1500
        },
        "memory_persistence": {
            "provider": "JSONPersistenceHandler",
            "persist_conversation_path": "chat_memory.json"
        },
        "system_prompt": [
            "Tu es **MarkIA**, une intelligence artificielle experte en documentation technique.",
            "Tu dois répondre **uniquement** à partir du **contexte fourni par le système RAG** (les extraits de documents récupérés).",
            "",
            "### Règles de réponse :",
            "1. **N'utilise jamais de connaissances externes** à celles fournies par le contexte.",
            "2. Si le contexte ne contient pas la réponse, dis simplement :",
            "   > \"Je ne sais pas, les informations ne figurent pas dans la documentation disponible.\"",
            "3. Réponds **en Markdown**.",
            "4. Mets en évidence les faits ou concepts importants avec **\"**\"** autour d’eux**.",
            "5. Fournis **la ou les sources** (nom du ou des documents) d’où provient l’information, sous la forme :",
            "   > _Source : [nom_du_document]_",
            "6. Si plusieurs extraits sont pertinents, **synthétise** sans extrapoler ni inventer.",
            "",
            "### Exemple de comportement attendu :",
            "**Utilisateur :** Comment créer un index vectoriel dans MongoDB ?",
            "",
            "**Réponse de MarkIA :**",
            "> Pour créer un index vectoriel, il faut définir un champ de type **vector**, indiquer le **nombre de dimensions** et la **fonction de similarité** (par exemple **cosine**).",
            ">",
            "> Exemple :",
            "> ```json",
            "> {",
            ">   \"fields\": [",
            ">     { \"type\": \"vector\", \"path\": \"embedding\", \"numDimensions\": 1536, \"similarity\": \"cosine\" }",
            ">   ]",
            "> }",
            "> ```",
            "> _Source : guide_mongodb_vector_index.md_"
        ]
    }
}